<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Carcassonne Online (Mobile)</title>
  <link rel="stylesheet" href="style.css?v=400" />
</head>
<body>
  <div id="app" class="onlineOnly">
    <aside id="sidebar">
      <h1>Carcassonne Online</h1>

      <div id="onlinePane">
        <section class="card onlinePrimaryCard">
          <h2>Now Playing</h2>
          <div id="onlineConnStatus" class="hint">Disconnected.</div>
          <div id="onlineMatchStatus" class="hint">No active match.</div>
          <div id="onlineMeepleStatus" class="hint">Meeple selection: none.</div>
          <div id="onlineScoreSummary"></div>
        </section>

        <details class="card onlineCollapse" open>
          <summary>Turn Actions</summary>
          <div class="hint">
            On your turn, tap an empty cell to place the drawn tile immediately.<br/>
            Optionally tap a marker on that tile to select meeple placement, then use Confirm/Revert at top of board.
          </div>
        </details>

        <details class="card onlineCollapse">
          <summary>Score Details</summary>
          <div class="hint">Tap any row to highlight that connected area on the board.</div>
          <div id="onlineFeatureList" class="onlineFeatureList"></div>
        </details>

        <details class="card onlineCollapse">
          <summary>Lobby</summary>
          <div id="onlineUsersList" class="onlineList"></div>
        </details>

        <details class="card onlineCollapse">
          <summary>Invites</summary>
          <div id="onlineInviteList" class="onlineList"></div>
        </details>

        <details class="card onlineCollapse">
          <summary>Global Chat</summary>
          <div id="onlineChatLog" class="onlineChatLog"></div>
          <div class="row">
            <input id="onlineChatInput" type="text" placeholder="Say something..." maxlength="220" />
            <button id="onlineChatSend" type="button">Send</button>
          </div>
        </details>

        <details class="card onlineCollapse">
          <summary>Settings</summary>
          <div class="row">
            <input id="onlineNameInput" type="text" placeholder="Your name" maxlength="28" />
            <button id="onlineConnectBtn" type="button">Connect</button>
            <button id="onlineDisconnectBtn" type="button">Disconnect</button>
          </div>

          <div class="row">
            <button id="rotL" title="Rotate left">⟲</button>
            <div id="rotLabel">Rotation: 0°</div>
            <button id="rotR" title="Rotate right">⟳</button>
          </div>

          <div class="row">
            <label for="onlineControlMode">Controls</label>
            <select id="onlineControlMode">
              <option value="auto">Auto</option>
              <option value="mobile">Mobile</option>
              <option value="desktop">Desktop</option>
            </select>
          </div>
          <div id="onlineControlHint" class="hint">Desktop controls: click empty cell to place+lock tile immediately, then Confirm/Revert.</div>

          <div class="row">
            <label class="chk"><input type="checkbox" id="simplifiedGraphics"> Simplified graphics</label>
          </div>
          <div class="row hidden">
            <label class="chk"><input type="checkbox" id="useCounts" checked> Respect tile counts</label>
            <label class="chk"><input type="checkbox" id="ignoreMeepleRule"> Ignore occupied rule</label>
          </div>

          <div class="row hidden">
            <button class="pbtn" id="p1btn">Player 1 (Blue)</button>
            <button class="pbtn" id="p2btn">Player 2 (Red)</button>
          </div>

          <div class="row hidden">
            <label for="tileSelect">Tile</label>
            <select id="tileSelect"></select>
          </div>
          <div class="row hidden">
            <div id="tilePreview" class="tilePreview" title="Selected tile preview"></div>
            <div id="tilePalette" class="palette" aria-label="Tile palette"></div>
          </div>

          <div class="row hidden">
            <button id="undoBtn">Undo</button>
            <button id="resetBtn">Reset</button>
            <button id="exportBtn">Export JSON</button>
            <button id="importBtn">Import JSON</button>
            <input id="importFile" type="file" accept="application/json" hidden />
          </div>
          <div class="row hidden">
            <button id="autoFillBoardBtn">Auto-fill Board</button>
            <button id="autoMeeplesBtn">Random 5+5 Meeples</button>
          </div>
        </details>
      </div>

      <div id="scoreBox" class="hidden"></div>
      <div id="playPane" class="hidden"></div>
      <div id="refinePane" class="hidden"></div>
      <button id="tabPlay" class="hidden" type="button">Play</button>
      <button id="tabRefine" class="hidden" type="button">Refine</button>
      <button id="tabOnline" class="hidden" type="button">Online</button>
    </aside>

    <main id="main">
      <div id="toolbar">
        <div id="toolbarTop">
          <button id="toggleSidebarBtn" type="button" title="Collapse/expand left panel">Panel</button>
          <div id="boardTopInfo">No active match.</div>
          <div id="onlineBoardActions" class="hidden">
            <button id="onlineConfirmBtn" type="button">Confirm</button>
            <button id="onlineRevertBtn" type="button">Revert</button>
          </div>
        </div>
        <div id="status">Loading…</div>
      </div>
      <div id="boardWrap" tabindex="0" title="Tap/drag board. Wheel rotates selected tile in desktop browsers.">
        <div id="board"></div>
      </div>
      <div id="refineMain" class="hidden"></div>
    </main>
  </div>

  <script src="app.js?v=400"></script>
</body>
</html>
